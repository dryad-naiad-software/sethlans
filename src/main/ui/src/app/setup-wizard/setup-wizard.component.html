<!--
  ~ Copyright (c) 2022 Dryad and Naiad Software LLC
  ~
  ~ This program is free software; you can redistribute it and/or
  ~ modify it under the terms of the GNU General Public License
  ~ as published by the Free Software Foundation; either version 2
  ~ of the License, or (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program; if not, write to the Free Software
  ~ Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
  -->
<div class="row">
  <div class="col-md-8 mx-auto mt-3 mb-3">
    <div class="card">
      <div class="card-header">
        <h4 style="font-family: 'Fjalla One', sans-serif">Sethlans Setup Wizard</h4>
      </div>
      <div class="card-body">
        <div *ngIf="setupWizardProgress == SetupWizardProgress.BEGIN">
          <p>Welcome to the Sethlans Setup Wizard. </p>
          <p> This wizard will walk you through the initial setup of the Sethlans Distributed Rendering Environment.</p>
          <h5>Overview</h5>
          <p>Sethlans is designed as a distributed render farm/network renderer that can work in both local and remote
            networks utilizing Blender as the rendering backend. </p>
          <h5>Features</h5>
          <ul>
            <li>AVI and MP4 animation encoding</li>
            <li>Multi-GPU support on nodes</li>
            <li>AMD GPU Support</li>
            <li>Combined CPU and GPU rendering on a single node</li>
            <li>Blender version selection per project</li>
          </ul>
        </div>
        <!--Setup Wizard Nav Menu-->
        <div *ngIf="setupWizardProgress != SetupWizardProgress.BEGIN">
          <ul class="nav nav-tabs justify-content-between pb-3">
            <li>
              <button (click)="goToMode()"
                      [disabled]="setupWizardProgress == SetupWizardProgress.FINISHED"

                      [ngClass]="setupWizardProgress == SetupWizardProgress.MODE
                      ? 'btn-outline-primary' : 'btn-outline-dark'"
                      class="btn btn-lg btn-circle" ngbTooltip="Mode Selection"
                      type="button">
                <fa-icon [icon]="faFlagCheckered"></fa-icon>
              </button>
            </li>
            <li>
              <button (click)="goToAdmin()"
                      [disabled]="setupWizardProgress == SetupWizardProgress.FINISHED"

                      [ngClass]="setupWizardProgress == SetupWizardProgress.ADMIN_SETUP
                      ? 'btn-outline-primary' : 'btn-outline-dark'"
                      class="btn btn-lg btn-circle" ngbTooltip="Admin User Setup"
                      type="button">
                <fa-icon [icon]="faUserNinja"></fa-icon>
              </button>
            </li>
            <li>
              <button (click)="goToModeSetup()"
                      [disabled]="setupWizardProgress == SetupWizardProgress.FINISHED || !modeSettingsEnabled"

                      [ngClass]="setupWizardProgress == SetupWizardProgress.MODE_SETUP
                      ? 'btn-outline-primary' : 'btn-outline-dark'"
                      class="btn btn-lg btn-circle" ngbTooltip="Sethlans Mode Setup"
                      type="button">
                <fa-icon [icon]="faGear"></fa-icon>
              </button>
            </li>
            <li>
              <button (click)="goToSettings()"
                      [disabled]="setupWizardProgress == SetupWizardProgress.FINISHED || !settingsEnabled"

                      [ngClass]="setupWizardProgress == SetupWizardProgress.SETTINGS
                      ? 'btn-outline-primary' : 'btn-outline-dark'"
                      class="btn btn-lg btn-circle" ngbTooltip="Sethlans Settings"
                      type="button">
                <fa-icon [icon]="faSliders"></fa-icon>
              </button>
            </li>
            <li>
              <button (click)="goToSummary()"
                      [disabled]="setupWizardProgress == SetupWizardProgress.FINISHED || !summaryEnabled"
                      [ngClass]="setupWizardProgress == SetupWizardProgress.SUMMARY
                      ? 'btn-outline-primary' : 'btn-outline-dark'"
                      class="btn btn-lg btn-circle" ngbTooltip="Summary"
                      type="button">
                <fa-icon [icon]="faRectangleList"></fa-icon>
              </button>
            </li>
            <li>
              <button
                [disabled]="setupWizardProgress != SetupWizardProgress.FINISHED"
                [ngClass]="setupWizardProgress == SetupWizardProgress.FINISHED
                      ? 'btn-outline-success' : 'btn-outline-secondary'"
                class="btn btn-lg btn-circle" ngbTooltip="Finished"
                type="button">
                <fa-icon [icon]="faCheck"></fa-icon>
              </button>
            </li>
          </ul>
        </div>
        <!--Mode Setup-->
        <div *ngIf="setupWizardProgress == SetupWizardProgress.MODE" class="row py-1">
          <div class="col-md-4 ms-1">
            <h5>Sethlans Modes</h5>
            <div class="form-check" ngbTooltip="Sethlans will act as a server and as a node" placement="left">
              <label class="form-check-label">
                <input [(ngModel)]="setupForm.mode"
                       [value]="Mode.DUAL"
                       class="form-check-input"
                       name="mode"
                       required
                       type="radio">Dual
              </label>
            </div>
            <div class="form-check" ngbTooltip="Sethlans will be configured as a server" placement="left">
              <label class="form-check-label">
                <input [(ngModel)]="setupForm.mode"
                       [value]="Mode.SERVER"
                       class="form-check-input"
                       name="mode"
                       required
                       type="radio">Server
              </label>
            </div>
            <div class="form-check" ngbTooltip="Sethlans will be configured as a node only" placement="left">
              <label class="form-check-label">
                <input [(ngModel)]="setupForm.mode"
                       [value]="Mode.NODE"
                       class="form-check-input"
                       name="mode"
                       required
                       type="radio">Node
              </label>
            </div>
          </div>
          <div class="col-md-6">
            <ul>
              <li>
                <p><strong>Dual:</strong> Combination of a server and a node. Allows both the creation and management of
                  render
                  queues and the rendering of tasks.</p>

              </li>
              <li>
                <p><strong>Server:</strong> Creation of render projects, management of render queues, provides
                  notifications for
                  projects, manages nodes. </p>
              </li>
              <li>
                <p><strong>Node:</strong> Receives rendering tasks from the server, returns finished products back to
                  the
                  server.</p>
              </li>

            </ul>

          </div>

        </div>
        <!--Admin Setup -->
        <div *ngIf="setupWizardProgress == SetupWizardProgress.ADMIN_SETUP" class="row py-1">
          <h6>Admin Registration</h6>
          <div class="row">
            <div class="col-md">
              <input class="form-control form-control-sm"
                     id="username"
                     (keyup)="validateUsername()"
                     [(ngModel)]="setupForm.user.username"
                     name="username"
                     placeholder="Username"
                     required type="text"/>
              <div *ngIf="usernameError" class="alert alert-danger">
                <ul>
                  <li>Username is required.</li>
                  <li>Minimum of 4 characters, alpha-numeric characters only.</li>
                </ul>
              </div>
            </div>
            <div *ngIf="setupForm.mode != Mode.NODE" class="col-md">
              <input class="form-control form-control-sm"
                     id="email"
                     (keyup)="validateEmail()"
                     name="email"
                     placeholder="Email Address"
                     [(ngModel)]="setupForm.user.email"
                     required type="text">
              <div *ngIf="emailError" class="alert alert-danger">
                <ul>
                  <li>Email is required and must be valid.</li>
                </ul>
              </div>
            </div>
          </div>
          <div class="row pt-3">
            <div class="col-md">
              <div class="input-group input-group-sm">
                <input
                  class="form-control form-control-sm"
                  id="password"
                  name="password"
                  (keyup)="validatePassword()"
                  [(ngModel)]="setupForm.user.password"
                  [type]="showPass ? 'text' : 'password'"
                  placeholder="Password" required>
                <span (mousedown)="showPass=true" (mouseup)="showPass=false"
                      class="input-group-text" style="background-color: white"><fa-icon
                  [icon]="faEye"></fa-icon> </span>
              </div>
              <div *ngIf="passwordError" class="alert alert-danger">
                <ul>
                  <li>Password is required.</li>
                  <li>Password must be a minimum 8 characters.</li>
                </ul>
              </div>
            </div>
            <div class="col-md">
              <div class="input-group input-group-sm">
                <input
                  class="form-control form-control-sm"
                  id="passwordConfirm"
                  name="passwordConfirm"
                  (keyup)="checkPasswordConfirm()"
                  [(ngModel)]="confirmPass"
                  [type]="showPass ? 'text' : 'password'"
                  placeholder="Confirm Password" required>
                <span (mousedown)="showPass=true" (mouseup)="showPass=false" class="input-group-text"
                      style="background-color: white"><fa-icon
                  [icon]="faEye"></fa-icon> </span>
              </div>
              <div *ngIf="!passwordMatch" class="alert alert-danger">
                <ul>
                  <li>Passwords must match.</li>
                </ul>
              </div>
            </div>
          </div>

          <div class="row pt-3">
            <h6>Password Recovery Questions</h6>
            <div class="row pt-2">
              <div class="col-md">
                <select (change)="updateChallenge(0, $any($event.target).value)" [(ngModel)]="challenge1"
                        class="form-select form-select-sm"
                        name="challenge1">
                  <option *ngFor="let challenge of setupForm.challengeQuestions"
                          [ngValue]="challenge">{{challenge}}</option>
                </select>
              </div>
              <div class="col-md">
                <div class="input-group input-group-sm">
                  <input [(ngModel)]="response1"
                         (keyup)="updateResponse(0, $any($event.target).value)"
                         class="form-control form-control-sm"
                         placeholder="Response" required>
                </div>
              </div>
            </div>
            <div class="row pt-3">
              <div class="col-md ">
                <select (change)="updateChallenge(1, $any($event.target).value)" [(ngModel)]="challenge2"
                        class="form-select form-select-sm"
                        name="challenge2">
                  <option *ngFor="let challenge of setupForm.challengeQuestions"
                          [ngValue]="challenge">{{challenge}}</option>
                </select>
              </div>
              <div class="col-md">
                <div class="input-group input-group-sm">
                  <input [(ngModel)]="response2"
                         (keyup)="updateResponse(1, $any($event.target).value)"
                         class="form-control form-control-sm"
                         placeholder="Response" required>
                </div>
              </div>

            </div>

            <div class="row pt-3">
              <div class="col-md ">
                <select (change)="updateChallenge(2, $any($event.target).value)" [(ngModel)]="challenge3"
                        class="form-select form-select-sm"
                        name="challenge3">
                  <option *ngFor="let challenge of setupForm.challengeQuestions"
                          [ngValue]="challenge">{{challenge}}</option>
                </select>
              </div>
              <div class="col-md">
                <div class="input-group input-group-sm">
                  <input [(ngModel)]="response3"
                         (keyup)="updateResponse(2, $any($event.target).value)"
                         class="form-control form-control-sm"
                         placeholder="Response" required>
                </div>
              </div>


            </div>
          </div>
        </div>

        <!--Sethlans Mode Setup -->
        <div *ngIf="setupWizardProgress == SetupWizardProgress.MODE_SETUP" class="row py-1">
          <div *ngIf="setupForm.mode == Mode.SERVER || setupForm.mode == Mode.DUAL" class="row">
            <div class="col-md-12">
              <h6>Select Blender Binary Version</h6>
              <select [(ngModel)]="setupForm.serverSettings.blenderVersion" class="form-select form-select-sm"
                      name="version">
                <option *ngFor="let version of setupForm.blenderVersions" ngValue="{{version}}">{{version}}</option>
              </select>
            </div>
          </div>
          <div *ngIf="setupForm.mode == Mode.NODE" class="row"
               ngbTooltip="API Key obtained from Sethlans Server. Can be left blank if not known" placement="top">
            <div class="col-md-12 pt-3">
              <h6>API Key</h6>
              <input [(ngModel)]="setupForm.nodeSettings.apiKey"
                     class="form-control form-control-sm "
                     id="apiKey" type="text"
              />
            </div>
          </div>
          <div *ngIf="setupForm.mode == Mode.NODE || setupForm.mode == Mode.DUAL" class="row">
            <div class="col-md-12 pt-3">
              <h6>Compute Method Selection</h6>
              <select (click)="nextEnabled = checkGPUs()" [(ngModel)]="setupForm.nodeSettings.nodeType"
                      class="form-select form-select-sm"
                      name="nodeTypes">
                <option *ngFor="let nodeTypes of setupForm.nodeSettings.availableTypes" ngValue="{{nodeTypes}}">
                  {{nodeTypes}}</option>
              </select>
            </div>
          </div>
          <div *ngIf="setupForm.mode == Mode.NODE || setupForm.mode == Mode.DUAL" class="row">
            <div *ngIf="setupForm.nodeSettings.nodeType != NodeType.GPU" class="col-md-6 pt-3">
              <h6>CPU Settings</h6>
              <label class="form-label" for="cores">Selected Cores: {{setupForm.nodeSettings.cores}}</label>
              <input [(ngModel)]="setupForm.nodeSettings.cores" class="form-range" id="cores"
                     max="{{setupForm.systemInfo.cpu.cores}}" min="1"
                     type="range">
              <label class="form-label" for="cpuTile">CPU Tile Size</label>
              <input [(ngModel)]="setupForm.nodeSettings.tileSizeCPU"
                     class="form-control form-control-sm"
                     id="cpuTile" type="number">
            </div>
            <div *ngIf="setupForm.nodeSettings.nodeType != NodeType.CPU" class="col-md-6 pt-3">
              <h6>GPU Settings</h6>
              <select (click)="nextEnabled = checkGPUs()" [(ngModel)]="setupForm.nodeSettings.selectedGPUs"
                      class="form-select" multiple>
                <option *ngFor="let gpus of setupForm.nodeSettings.availableGPUs" [value]="gpus">{{gpus.model}}</option>
              </select>
              <div class="form-check form-switch pt-1">
                <input [(ngModel)]="setupForm.nodeSettings.gpuCombined" class="form-check-input" id="combineGPU"
                       role="switch"
                       type="checkbox">
                <label class="form-check-label" for="combineGPU">Combine GPUs</label>
              </div>
              <br/>

              <label class="form-label" for="gpuTile">GPU Tile Size</label>
              <input [(ngModel)]="setupForm.nodeSettings.tileSizeGPU"
                     class="form-control form-control-sm "
                     id="gpuTile" type="number"
              />
            </div>
          </div>
        </div>

        <!-- Settings Setup-->
        <div *ngIf="setupWizardProgress == SetupWizardProgress.SETTINGS" class="row">
          <ul class="nav nav-tabs">
            <li class="nav-item">
                <span (click)="showMailSettings=false"
                      [ngClass]="showMailSettings
                      ? '' : 'active'"
                      class="nav-link"
                >Settings</span>
            </li>
            <li *ngIf="setupForm.mode != Mode.NODE" class="nav-item">
                <span (click)="showMailSettings=true"
                      [ngClass]="showMailSettings
                      ? 'active' : ''"
                      class="nav-link"
                >Mail Settings</span>
            </li>
          </ul>
          <div [hidden]="showMailSettings" class="pt-2">
            <div class="row">
              <div class="col-md-9">
                <h6>IP Address</h6>
                <input [(ngModel)]="setupForm.ipAddress"
                       class="form-control form-control-sm"
                       id="ipAddress"
                       id="ipAddress"
                       required type="text"/>
                <br/>
              </div>
              <div class="col-md-3">
                <h6>HTTPS Port</h6>
                <input [(ngModel)]="setupForm.port"
                       class="form-control form-control-sm"
                       id="networkPort"
                       id="networkPort"
                       required type="text"/>
                <br/>
              </div>
            </div>
            <h6>Sethlans Hostname</h6>
            <input [(ngModel)]="setupForm.hostname"
                   class="form-control form-control-sm"
                   id="sethlansHostname"
                   id="sethlansHostname"
                   required type="text"/>
            <br/>

            <h6>Sethlans URL</h6>
            <input [(ngModel)]="setupForm.appURL"
                   class="form-control form-control-sm"
                   id="sethlansURL"
                   id="sethlansURL"
                   required type="text"/>
            <br/>
            <h6>Log Level</h6>
            <select [(ngModel)]="setupForm.logLevel" class="form-select form-select-sm"
                    name="logLevel">
              <option>{{LogLevel.INFO}}</option>
              <option>{{LogLevel.DEBUG}}</option>

            </select>
          </div>
          <div [hidden]="!showMailSettings" class="pt-2">
            <div class="form-check form-switch pt-1">
              <input [(ngModel)]="setupForm.mailSettings.mailEnabled" class="form-check-input" id="enableSMTP"
                     role="switch"
                     type="checkbox">
              <label class="form-check-label" for="enableSMTP">Configure SMTP Server</label>
            </div>
            <br/>
            <div class="row">
              <div class="col-md-9">
                <h6>SMTP Server</h6>
                <input [(ngModel)]="setupForm.mailSettings.mailHost" [disabled]="!setupForm.mailSettings.mailEnabled"
                       class="form-control form-control-sm"
                       id="smtpServer"
                       placeholder="smtp.example.com"
                       required type="text"/>
                <br/>
              </div>
              <div class="col-md-3">
                <h6>SMTP Port</h6>
                <input [(ngModel)]="setupForm.mailSettings.mailPort" [disabled]="!setupForm.mailSettings.mailEnabled"
                       class="form-control form-control-sm"
                       id="smtpPort"
                       placeholder="25"
                       required type="text"/>
                <br/>
              </div>
            </div>
            <h6>Reply To Address</h6>
            <input [(ngModel)]="setupForm.mailSettings.replyToAddress"
                   [disabled]="!setupForm.mailSettings.mailEnabled"
                   class="form-control form-control-sm"
                   id="replyToAddress"
                   placeholder="noreply@example.com"
                   required type="text"/>
            <br/>
            <div class="form-check form-check-inline">
              <input [(ngModel)]="setupForm.mailSettings.sslEnabled" [disabled]="!setupForm.mailSettings.mailEnabled"
                     class="form-check-input" id="useSSL"
                     role="switch" type="checkbox">
              <label class="form-check-label" for="useSSL">Use SSL</label>
            </div>
            <div class="form-check form-check-inline">
              <input [(ngModel)]="setupForm.mailSettings.startTLSEnabled"
                     [disabled]="!setupForm.mailSettings.mailEnabled" class="form-check-input" id="enableSTARTTLS"
                     role="switch"
                     type="checkbox">
              <label class="form-check-label" for="enableSTARTTLS">Enable STARTTLS</label>
            </div>
            <div class="form-check form-check-inline">
              <input [(ngModel)]="setupForm.mailSettings.startTLSRequired"
                     [disabled]="!setupForm.mailSettings.mailEnabled" class="form-check-input" id="requireTLS"
                     role="switch"
                     type="checkbox">
              <label class="form-check-label" for="requireTLS">Require STARTTLS</label>
            </div>
            <hr/>
            <div class="form-check form-switch pt-1">
              <input [(ngModel)]="setupForm.mailSettings.smtpAuth" [disabled]="!setupForm.mailSettings.mailEnabled"
                     class="form-check-input" id="useSMTPAuth"
                     role="switch"
                     type="checkbox">
              <label class="form-check-label" for="enableSMTP">Use SMTP Authentication</label>
            </div>
            <br/>
            <div class="row">
              <div class="col-md-6">
                <h6>SMTP Username</h6>
                <input [(ngModel)]="setupForm.mailSettings.username"
                       [disabled]="!setupForm.mailSettings.mailEnabled || !setupForm.mailSettings.smtpAuth"
                       class="form-control form-control-sm"
                       id="smtpUser"
                       placeholder="username"
                       required type="text"/>
                <br/>
              </div>
              <div class="col-md-6">

                <h6>SMTP Password</h6>
                <input [(ngModel)]="setupForm.mailSettings.password"
                       [disabled]="!setupForm.mailSettings.mailEnabled || !setupForm.mailSettings.smtpAuth"
                       class="form-control form-control-sm"
                       id="smtpPassword"
                       placeholder="password"
                       required type="password"/>
                <br/>
              </div>

            </div>

          </div>
        </div>
        <!--Summary Page-->
        <div *ngIf="setupWizardProgress == SetupWizardProgress.SUMMARY" class="row">
          <div class="col-md-6">
            <table class="table table-striped">
              <thead>
              <tr>
                <th scope="col">Setting</th>
                <th scope="col">Value</th>
              </tr>
              </thead>
              <tbody>
              <tr>
                <td>Mode</td>
                <td>{{setupForm.mode}}</td>
              </tr>
              <tr>
                <td>Administrative User</td>
                <td>{{setupForm.user.username}}</td>
              </tr>
              <tr>
                <td>Hostname</td>
                <td>{{setupForm.hostname}}</td>
              </tr>
              <tr>
                <td>IP Address</td>
                <td>{{setupForm.ipAddress}}</td>
              </tr>
              <tr>
                <td>HTTPS Port</td>
                <td>{{setupForm.port}}</td>
              </tr>
              <tr>
                <td>Logging Level</td>
                <td>{{setupForm.logLevel}}</td>
              </tr>
              </tbody>
            </table>
          </div>
          <div class="col-md-6">
            <table class="table table-striped">
              <thead>
              <tr>
                <th scope="col">Setting</th>
                <th scope="col">Value</th>
              </tr>
              </thead>
              <tbody>
              <tr *ngIf="setupForm.mode == Mode.DUAL || setupForm.mode == Mode.SERVER">
                <td>Initial Blender Version</td>
                <td>{{setupForm.serverSettings.blenderVersion}}</td>
              </tr>
              <tr *ngIf="setupForm.mode == Mode.DUAL || setupForm.mode == Mode.NODE">
                <td>Compute Method</td>
                <td>{{setupForm.nodeSettings.nodeType}}</td>
              </tr>
              <tr *ngIf="setupForm.mode == Mode.DUAL || setupForm.mode == Mode.NODE">
                <td>Rendering Cores</td>
                <td *ngIf="setupForm.nodeSettings.nodeType != NodeType.GPU">{{setupForm.nodeSettings.cores}}</td>
                <td *ngIf="setupForm.nodeSettings.nodeType == NodeType.GPU">N/A</td>
              </tr>
              <tr *ngIf="setupForm.mode == Mode.DUAL || setupForm.mode == Mode.NODE">
                <td>CPU Render Tile Size</td>
                <td
                  *ngIf="setupForm.nodeSettings.nodeType != NodeType.GPU">{{setupForm.nodeSettings.tileSizeCPU}}</td>
                <td *ngIf="setupForm.nodeSettings.nodeType == NodeType.GPU">N/A</td>
              </tr>
              <tr *ngIf="setupForm.mode == Mode.DUAL || setupForm.mode == Mode.NODE">
                <td>Selected GPUs</td>
                <td *ngIf="setupForm.nodeSettings.nodeType != NodeType.CPU">
                  <span *ngFor="let gpu of setupForm.nodeSettings.selectedGPUs">
                    {{gpu.model}}<br/>
                  </span>
                </td>
                <td *ngIf="setupForm.nodeSettings.nodeType == NodeType.CPU">N/A</td>
              </tr>
              <tr *ngIf="setupForm.mode == Mode.DUAL || setupForm.mode == Mode.NODE">
                <td>Combined GPU Rendering</td>
                <td
                  *ngIf="setupForm.nodeSettings.nodeType != NodeType.CPU">{{setupForm.nodeSettings.gpuCombined}}</td>
                <td *ngIf="setupForm.nodeSettings.nodeType == NodeType.CPU">N/A</td>
              </tr>
              <tr *ngIf="setupForm.mode == Mode.DUAL || setupForm.mode == Mode.NODE">
                <td>GPU Render Tile Size</td>
                <td
                  *ngIf="setupForm.nodeSettings.nodeType != NodeType.CPU">{{setupForm.nodeSettings.tileSizeGPU}}</td>
                <td *ngIf="setupForm.nodeSettings.nodeType == NodeType.CPU">N/A</td>
              </tr>
              <tr *ngIf="setupForm.mode == Mode.NODE">
                <td>Sethlans API Key</td>
                <td>{{setupForm.nodeSettings.apiKey}}</td>

              </tr>
              </tbody>
            </table>
          </div>

        </div>
        <!--Finished Page-->
        <div *ngIf="setupWizardProgress == SetupWizardProgress.FINISHED" class="row pt-2">
          <div class="col-md-2">
          </div>
          <div class="col-md-8 text-center">
            <h4>Sethlans Setup Has Completed!</h4>
            <br/>
            <p>Sethlans is restarting and will be accessible via the following link:</p>
            <a href="{{setupForm.appURL}}">{{setupForm.appURL}}</a>
            <br/>
            <br/>
            <p>This page will automatically refresh in 30 seconds</p>

          </div>

        </div>
      </div>
      <div class="card-footer">
        <nav>
          <button (click)="previous()"
                  *ngIf="setupWizardProgress != SetupWizardProgress.BEGIN
                  && setupWizardProgress != SetupWizardProgress.FINISHED"
                  [disabled]="setupWizardProgress == SetupWizardProgress.MODE"
                  class="btn btn-outline-primary float-start"> Previous
          </button>

          <button (click)="next()" *ngIf="setupWizardProgress != SetupWizardProgress.BEGIN && setupWizardProgress != SetupWizardProgress.SUMMARY
        && setupWizardProgress != SetupWizardProgress.FINISHED"
                  [disabled]="!nextEnabled"
                  class="btn btn-outline-primary float-end"> Next
          </button>

          <button (click)="finish()"
                  *ngIf="setupWizardProgress == SetupWizardProgress.SUMMARY ||
                  setupWizardProgress == SetupWizardProgress.FINISHED"
                  [disabled]="setupWizardProgress == SetupWizardProgress.FINISHED || finishClicked"
                  class="btn btn-outline-primary float-end"> Finish
          </button>

          <button (click)="loadSetupForm()" *ngIf="setupWizardProgress == SetupWizardProgress.BEGIN"
                  class="btn btn-outline-primary float-end"> Start
          </button>
        </nav>

      </div>
    </div>
  </div>
</div>

<!--<div>-->
<!--  Debugging:-->
<!--  <pre>{{ setupForm | json }}</pre>-->
<!--</div>-->
