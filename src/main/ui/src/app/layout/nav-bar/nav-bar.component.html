<!--
  ~ Copyright (c) 2022 Dryad and Naiad Software LLC
  ~
  ~ This program is free software; you can redistribute it and/or
  ~ modify it under the terms of the GNU General Public License
  ~ as published by the Free Software Foundation; either version 2
  ~ of the License, or (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program; if not, write to the Free Software
  ~ Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
  -->
<nav class="navbar navbar-expand-md navbar-dark bg-dark py-1 border-bottom">
  <a class="navbar-brand ps-5" href="/">
    <img [src]="logo" alt="logo" class="d-inline-block align-top" height="32"></a>
  <ul *ngIf="authenticated" class="text-white nav ms-auto pe-5">
    <!--Home Button -->
    <li class="nav-item">
      <a class="text-white nav-link" href="/">
        <fa-icon [icon]="faHouse"></fa-icon>
      </a>
    </li>

    <!--Projects Menu-->
    <li *ngIf="mode == Mode.SERVER || mode == Mode.DUAL" class="nav-item">
      <a class="text-white nav-link" href="/projects">
        <fa-icon [icon]="faPuzzlePiece"></fa-icon>
        <span class="ms-2">Projects</span>
      </a>
    </li>


    <!--User Menu-->
    <li class="nav-item" id="userDropDown" ngbDropdown placement="bottom-right">
      <a class="text-white nav-link dropdown-toggle" href="javascript:void(0);" ngbDropdownToggle>
        <fa-icon [icon]="faUser"></fa-icon>
        <span class="ms-2">{{sethlansUser.username}}</span></a>
      <div ngbDropdownMenu>
        <a class="dropdown-item" href="/user_settings">
          <fa-icon [icon]="faWrench"></fa-icon>
          <span class="ms-2">User Settings</span></a>

        <a class="dropdown-item" href="/logout">
          <fa-icon [icon]="faRightFromBracket"></fa-icon>
          <span class="ms-2">Logout</span></a>
      </div>
    </li>


    <!--Settings Menu-->
    <li *ngIf="isAdministrator" class="nav-item" id="adminDropDown" ngbDropdown placement="bottom-right">
      <a class="text-white nav-link dropdown-toggle" href="javascript:void(0);" ngbDropdownToggle>
        <fa-icon [icon]="faGear"></fa-icon>
        <span class="ms-2">Settings</span>
      </a>
      <div ngbDropdownMenu>
        <div *ngIf="mode == Mode.NODE || mode == Mode.DUAL">
          <h6 class="dropdown-header">Node Management</h6>
          <a class="dropdown-item" href="/admin/server">
            <fa-icon [icon]="faServer"></fa-icon>
            <span class="ms-2">Authorized Server</span>
          </a>
          <a class="dropdown-item" href="/admin/compute_settings">
            <fa-icon [icon]="faMicrochip"></fa-icon>
            <span class="ms-2">Compute Settings</span>
          </a>
          <a class="dropdown-item" href="/admin/node_render_history">
            <fa-icon [icon]="faTimeLine"></fa-icon>
            <span class="ms-2">Node Render History</span>
          </a>
        </div>
        <div *ngIf="mode == Mode.SERVER || mode == Mode.DUAL">
          <div *ngIf="mode == Mode.DUAL" class="dropdown-divider"></div>
          <h6 class="dropdown-header">Server Management</h6>
          <a class="dropdown-item" href="/admin/nodes">
            <fa-icon [icon]="faDesktop"></fa-icon>
            <span class="ms-2">Nodes</span>
          </a>
          <a class="dropdown-item" href="/admin/blender_version_admin">
            <i class="icon-blender"></i>
            <span class="ms-2">Blender Version Management</span>
          </a>
          <a class="dropdown-item" href="/admin/server_queue_history">
            <fa-icon [icon]="faTimeLine"></fa-icon>
            <span class="ms-2">Server Queue History</span>
          </a>
        </div>
        <div>
          <div class="dropdown-divider"></div>
          <h6 class="dropdown-header">System Management</h6>
          <a class="dropdown-item" href="/admin/user_management">
            <fa-icon [icon]="faUser"></fa-icon>
            <span class="ms-2">User Management</span>
          </a>
          <a *ngIf="isSuperAdministrator" class="dropdown-item" href="/admin/sethlans_settings">
            <fa-icon [icon]="faCogs"></fa-icon>
            <span class="ms-2">Configuration</span>
          </a>
          <a class="dropdown-item" href="/admin/logs">
            <fa-icon [icon]="faBook"></fa-icon>
            <span class="ms-2">Logs</span>
          </a>
          <a *ngIf="isSuperAdministrator" class="dropdown-item" href="/restart">
            <fa-icon [icon]="faArrowsRotate"></fa-icon>
            <span class="ms-2">Restart</span>
          </a>
          <a *ngIf="isSuperAdministrator" class="dropdown-item" href="/shutdown">
            <fa-icon [icon]="faPowerOff"></fa-icon>
            <span class="ms-2">Shutdown</span>
          </a>
        </div>
      </div>
    </li>

    <!--Help Menu-->
    <li class="nav-item" ngbDropdown placement="bottom-right">
      <a class="text-white nav-link" href="javascript:void(0);" ngbDropdownToggle>
        <fa-icon [icon]="faQuestionCircle"></fa-icon>
        <span class="ms-2">Help</span>
      </a>
      <div ngbDropdownMenu>
        <a class="dropdown-item" href="https://sethlans-docs.dryadandnaiad.com/" target="_blank">
          <fa-icon [icon]="faBookOpen"></fa-icon>
          <span class="ms-2">Documentation</span></a>

        <button class="dropdown-item" (click)="aboutModal(about)">
          <fa-icon [icon]="faStar"></fa-icon>
          <span class="ms-2">About</span></button>
      </div>
    </li>

    <!--Notifications-->
    <li class="nav-item" id="notificationsDropDown" ngbDropdown placement="bottom-right">
      <a class="text-white nav-link" href="javascript:void(0);" ngbDropdownToggle>
        <fa-icon [icon]="faBell"></fa-icon>
        <span *ngIf="newNotifications == true" class="badge badge-notify">1</span>
      </a>
    </li>
  </ul>
</nav>

<ng-template #about let-modal>
  <div class="modal-header">
    <h4 style="font-family: 'Fjalla One', sans-serif;">About</h4>
    <button (click)="modal.dismiss('Cross click')" aria-label="Close" class="btn-close" type="button"></button>
  </div>
  <div class="modal-body">
    <div class="row">
      <div class="col-5">
        <img [src]="logoDark"
             height="64"
             class="align-top"
             alt="logo">
      </div>
      <div class="col-7">
        <p>Sethlans v.{{sethlansVersion}}</p>
        <p>Distributed render environment for Blender. Running on Java {{javaVersion}}</p>
        <p>Copyright 2018-{{year}} Dryad and
          Naiad Software
          LLC.</p>
      </div>
    </div>


  </div>
  <div class="modal-footer">
    <a href="https://github.com/dryad-naiad-software/sethlans/blob/master/LICENSE" class="mr-auto">Licensing
      Information</a>
  </div>
</ng-template>
