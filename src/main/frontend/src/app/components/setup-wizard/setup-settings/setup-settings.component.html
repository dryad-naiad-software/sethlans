<!--
  ~ Copyright (c) 2018 Dryad and Naiad Software LLC.
  ~
  ~ This program is free software; you can redistribute it and/or
  ~ modify it under the terms of the GNU General Public License
  ~ as published by the Free Software Foundation; either version 2
  ~ of the License, or (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program; if not, write to the Free Software
  ~ Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
  ~
  -->

<form #settingsForm="ngForm" class="editForm">
  <h5>Network</h5>
  <div class="form-group" ngbTooltip="IP Address used for communication between server and nodes." placement="left">
    <label for="ipAddress">IP Address:</label>
    <input id="ipAddress"
           type="text"
           name="ipAddress"
           #ipAddress="ngModel"
           [(ngModel)]="setupFormData.ipAddress"
           required
           pattern="^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$"
           [ngClass]="{'is-invalid':ipAddress.errors && ipAddress.touched}"
           class="form-control form-control-sm"/>
    <div class="invalid-feedback" [hidden]="ipAddress.valid">
      <ul>
        <li>A valid IPv4 address is required.</li>
      </ul>
    </div>
  </div>
  <div class="form-group" ngbTooltip="Default HTTPS port is 7443. Sethlans will communicate on this port."
       placement="left">
    <label for="httpsPort">Sethlans HTTPS Port: </label>
    <input id="httpsPort"
           type="number"
           name="httpsPort"
           #httpsPort="ngModel"
           [(ngModel)]="setupFormData.port"
           required
           pattern="^(?:6553[0-5]|655[0-2][0-9]|65[0-4][0-9]{2}|6[0-4][0-9]{3}|[1-5][0-9]{4}|[1-9][0-9]{1,3}|[1-9])$"
           [ngClass]="{'is-invalid':httpsPort.errors && httpsPort.touched}"
           class="form-control form-control-sm"/>
    <div class="invalid-feedback" [hidden]="httpsPort.valid">
      <ul>
        <li>A valid port is required. Range 1-65535</li>
      </ul>
    </div>
  </div>
  <hr/>
  <h5>Install Location</h5>
  <div class="form-group"
       ngbTooltip="Main location for Sethlans.  By default created as a subdirectory in the home directory of installation user."
       placement="left">
    <label for="rootDirectory">Sethlans Home Directory</label>
    <input id="rootDirectory"
           type="text"
           name="rootDirectory"
           #rootDirectory="ngModel"
           [(ngModel)]="setupFormData.rootDirectory"
           required
           class="form-control form-control-sm"/>
  </div>
</form>
<nav>
  <button class="btn btn-outline-secondary" (click)="previousStep()">Previous
  </button>
  <button [disabled]="!settingsForm.valid" class="btn btn-outline-primary float-right" (click)="save()">Next</button>
</nav>
